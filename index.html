<!DOCTYPE html>
<html>
<head>
  <title>Military Map Prototype - Nigeria</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css" />
  <style>
    #map { height: 100vh; width: 100%; }
    .popup-img { width: 150px; height: 100px; object-fit: cover; display:block; margin-bottom:5px; }
  </style>
</head>
<body>
<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>
<script>
  // Nigeria bounds
  const nigeriaBounds = [[4.3, 2.7], [13.9, 14.7]];

  // Initialize map
  const map = L.map('map', {
    maxBounds: nigeriaBounds,
    maxBoundsViscosity: 1.0
  }).setView([9.0820, 8.6753], 6);

  // Normal map tiles (OpenStreetMap)
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: 'Map data Â© <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'
  }).addTo(map);

  // Your name marker
  const myMarker = L.marker([9.0820, 8.6753]).addTo(map);
  myMarker.bindPopup("<b>Abdulzohir Adekanye</b><br>My location").openPopup();
  myMarker.bindTooltip("Abdulzohir Adekanye", {permanent:true, direction:'top', offset:[0,-10]});

  // Danger zones with house images and addresses
  const dangerZones = [
    {
      lat: 11.5, lng: 8.5,
      name: "Danger Zone 1",
      address: "123 Abuja Road, Nigeria",
      img: "https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/House_in_Lagos%2C_Nigeria.jpg/320px-House_in_Lagos%2C_Nigeria.jpg"
    },
    {
      lat: 10.3, lng: 7.8,
      name: "Danger Zone 2",
      address: "45 Kaduna Street, Nigeria",
      img: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/33/Nigerian_house.jpg/320px-Nigerian_house.jpg"
    }
  ];

  dangerZones.forEach(zone => {
    const marker = L.marker([zone.lat, zone.lng], {
      icon: L.icon({
        iconUrl: 'https://maps.google.com/mapfiles/ms/icons/red-dot.png',
        iconSize: [32,32]
      })
    }).addTo(map);

    // Popup with house image, name, and address
    marker.bindPopup(`
      <img src="${zone.img}" class="popup-img">
      <b>${zone.name}</b><br>
      Address: ${zone.address}<br>
      Simulated danger area
    `);

    // Permanent tooltip with name
    marker.bindTooltip(zone.name, {permanent:true, direction:'top', offset:[0,-10]});

    marker.on('click', () => {
      // Draw route from your location to the danger zone
      L.Routing.control({
        waypoints: [
          L.latLng(9.0820, 8.6753), // your location
          L.latLng(zone.lat, zone.lng)
        ],
        routeWhileDragging: false,
        show: false,
        addWaypoints: false
      }).addTo(map);

      // Speak directions
      const speech = new SpeechSynthesisUtterance(`Routing from Abdulzohir Adekanye to ${zone.name}, ${zone.address}`);
      window.speechSynthesis.speak(speech);
    });
  });
</script>
</body>
</html>
