<!DOCTYPE html>
<html>
<head>
  <title>Military Map Prototype - Nigeria</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css" />
  <style>
    #map { height: 100vh; width: 100%; }
  </style>
</head>
<body>
<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>
<script>
  // Nigeria bounds
  const nigeriaBounds = [[4.3, 2.7], [13.9, 14.7]]; // SW, NE lat,lng

  // Initialize map centered on Nigeria
  const map = L.map('map', {
    maxBounds: nigeriaBounds,
    maxBoundsViscosity: 1.0
  }).setView([9.0820, 8.6753], 6);

  // Satellite tiles
  L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
    attribution: 'Tiles Â© Esri'
  }).addTo(map);

  // Your name marker
  const myMarker = L.marker([9.0820, 8.6753]).addTo(map);
  myMarker.bindPopup("<b>Abdulzohir Adekanye</b><br>My location").openPopup();
  myMarker.bindTooltip("Abdulzohir Adekanye", {permanent: true, direction: 'top', offset: [0, -10]});

  // Simulated danger zones
  const dangerZones = [
    {lat: 11.5, lng: 8.5, name: "Danger Zone 1"},
    {lat: 10.3, lng: 7.8, name: "Danger Zone 2"}
  ];

  dangerZones.forEach(zone => {
    const marker = L.marker([zone.lat, zone.lng], {
      icon: L.icon({
        iconUrl: 'https://maps.google.com/mapfiles/ms/icons/red-dot.png',
        iconSize: [32,32]
      })
    }).addTo(map);
    marker.bindPopup(`<b>${zone.name}</b><br>Simulated danger area`);
    marker.bindTooltip(zone.name, {permanent: true, direction: 'top', offset: [0, -10]});

    marker.on('click', () => {
      // Directions from your location to danger zone
      L.Routing.control({
        waypoints: [
          L.latLng(9.0820, 8.6753), // your location
          L.latLng(zone.lat, zone.lng)
        ],
        routeWhileDragging: false,
        show: false
      }).addTo(map);

      // Speak directions
      const text = `Routing from Abdulzohir Adekanye to ${zone.name}`;
      const speech = new SpeechSynthesisUtterance(text);
      window.speechSynthesis.speak(speech);
    });
  });
</script>
</body>
</html>
